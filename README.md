# üìò University API ‚Äî FastAPI + MongoDB + CastleMock

## üöÄ –û–ø–∏—Å–∞–Ω–∏–µ

**University API** ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ–µ REST-API –Ω–∞ **FastAPI**, —Ä–∞–±–æ—Ç–∞—é—â–µ–µ –≤ Docker –∏ –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–µ **MongoDB** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Å—Ç—É–¥–µ–Ω—Ç–∞—Ö, –∫—É—Ä—Å–∞—Ö –∏ –∑–∞–ø–∏—Å—è—Ö –Ω–∞ –Ω–∏—Ö.  
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω—ã–π **CRUD** –¥–ª—è –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π, —Å–∏–¥–∏–Ω–≥ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ health-check –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è API + –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CastleMock –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –≤–Ω–µ—à–Ω–∏—Ö API.

---

## ‚öôÔ∏è –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- üêç **FastAPI** ‚Äî backend –∏ REST API  
- üçÉ **MongoDB** ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö  
- üè∞ **CastleMock** ‚Äî –∏–º–∏—Ç–∞—Ü–∏—è –≤–Ω–µ—à–Ω–∏—Ö API  
- üê≥ **Docker Compose** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫ –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
univercity_api/
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –ü–µ—Ä–µ–π–¥–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞:
   ```bash
   cd ~/univercity_api
   ```

2. –°–æ–±–µ—Ä–∏ –∏ –∑–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
   ```bash
   docker compose up --build
   ```

3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:
   ```bash
   docker ps
   ```

---

## üóëÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
docker compose down
```

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –æ—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ MongoDB:
```bash
docker compose down -v
```

---

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:
- Docker >= 27.0
- Docker Compose >= 1.29
- Python >= 3.12 (–µ—Å–ª–∏ —Ö–æ—á–µ—à—å –∑–∞–ø—É—Å–∫–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ Docker)
- WSL2 (–µ—Å–ª–∏ –Ω–∞ Windows)

–ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
docker --version
docker compose version
python3 --version
```
---

## üåê –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

| –°–µ—Ä–≤–∏—Å | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----|-----------|
| **FastAPI Docs** | [http://localhost:8000/docs](http://localhost:8000/docs) | Swagger UI —Å API |
| **MongoDB** | `mongodb://localhost:27017` | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| **CastleMock** | [http://localhost:8080/castlemock](http://localhost:8080/castlemock) | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–∫–æ–≤ |

---

## üìö –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã FastAPI

### üîß –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----------|-----------|
| `POST` | `/seed` | –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ |
| `GET` | `/health` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ |

### üë©‚Äçüéì Students

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----------|-----------|
| `GET` | `/students` | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ |
| `POST` | `/students` | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞ |
| `PUT` | `/students/{id}` | –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞ |
| `DELETE` | `/students/{id}` | –£–¥–∞–ª–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞ |

### üìö Courses

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----------|-----------|
| `GET` | `/courses` | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤ |
| `POST` | `/courses` | –î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä—Å |
| `PUT` | `/courses/{id}` | –û–±–Ω–æ–≤–∏—Ç—å –∫—É—Ä—Å |
| `DELETE` | `/courses/{id}` | –£–¥–∞–ª–∏—Ç—å –∫—É—Ä—Å |

### üìù Enrollments

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----------|-----------|
| `GET` | `/enrollments` | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏ |
| `POST` | `/enrollments` | –ó–∞–ø–∏—Å–∞—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞ –Ω–∞ –∫—É—Ä—Å |
| `DELETE` | `/enrollments/{id}` | –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å |

---

## üè∞ CastleMock ‚Äî –∏–º–∏—Ç–∞—Ü–∏—è –≤–Ω–µ—à–Ω–∏—Ö API

**CastleMock** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–µ–π–∫–æ–≤—ã—Ö –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ.  
–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –±–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Ä–µ–∞–ª—å–Ω—ã–º API.

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**  
üëâ [http://localhost:8080/castlemock](http://localhost:8080/castlemock)

### üå¶ –ü—Ä–∏–º–µ—Ä –º–æ–∫-–æ—Ç–≤–µ—Ç–∞
```json
{
  "city": "Berlin",
  "temperature": 18,
  "condition": "Cloudy"
}
```

---

## üîÑ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞
```bash
curl -X POST "http://localhost:8000/students/" -H "Content-Type: application/json" -d '{"name": "Alice", "age": 21, "email": "alice@example.com"}'
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞
```bash
curl -X PUT "http://localhost:8000/students/68e5a4bfc48eb29e7c491b3b" -H "Content-Type: application/json" -d '{"name": "New Name", "age": 25, "email": "new@example.com"}'
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": "68e5a4bfc48eb29e7c491b3b",
  "name": "New Name",
  "age": 25,
  "email": "new@example.com"
}
```

### –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞
```bash
curl -X DELETE "http://localhost:8000/students/68e5a4bfc48eb29e7c491b3b"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "deleted",
  "entity": "student",
  "id": "68e5a4bfc48eb29e7c491b3b"
}
```

---

## üß™ –°–∏–¥–∏–Ω–≥ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
–°–æ–∑–¥–∞—ë—Ç —Å–ª—É—á–∞–π–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (5 —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, 3 –∫—É—Ä—Å–∞ –∏ –∑–∞—á–∏—Å–ª–µ–Ω–∏—è –º–µ–∂–¥—É –Ω–∏–º–∏):
```bash
curl -X POST "http://localhost:8000/seed/"
```

---

## ü©∫ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```bash
curl http://localhost:8000/health
```
**–û—Ç–≤–µ—Ç:**
```json
{"status": "ok"}
```
---